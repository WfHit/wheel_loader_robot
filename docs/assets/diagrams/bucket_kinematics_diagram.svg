<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="780" viewBox="0 0 1400 780" xmlns="http://www.w3.org/2000/svg">
  <!-- Professional SVG diagram with clean layout -->
  <defs>
    <!-- Gradients for components -->
    <linearGradient id="boomGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#FFA726"/>
      <stop offset="50%" style="stop-color:#FF9800"/>
      <stop offset="100%" style="stop-color:#F57C00"/>
    </linearGradient>

    <linearGradient id="actuatorGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#EF5350"/>
      <stop offset="50%" style="stop-color:#F44336"/>
      <stop offset="100%" style="stop-color:#D32F2F"/>
    </linearGradient>

    <!-- Arrow markers -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333"/>
    </marker>

    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#9c27b0"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="780" fill="#fafafa"/>

  <!-- Title -->
  <text x="700" y="35" font-family="Arial, sans-serif" font-size="26" font-weight="bold" text-anchor="middle" fill="#333">
    Integrated Bucket Control Kinematics
  </text>

  <!-- Stage 1: Bucket Actuation Linkage -->
  <g id="stage1">
    <!-- Border -->
    <rect x="50" y="80" width="450" height="320" fill="none" stroke="#ff4444" stroke-width="2" stroke-dasharray="8,4" rx="5"/>

    <!-- Stage Title -->
    <text x="275" y="110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#ff4444">
      Stage 1: Bucket Actuation Linkage
    </text>
    <text x="275" y="130" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
      (Actuator Length + Boom Angle → Bellcrank Angle ∠OCB₁)
    </text>

    <!-- Mechanism -->
    <g transform="translate(150, 250)">
      <!-- Points -->
      <!-- O: Boom Pivot -->
      <circle cx="0" cy="0" r="8" fill="#333" stroke="#fff" stroke-width="2"/>
      <text x="-15" y="-10" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">O</text>
      <text x="-35" y="20" font-family="Arial, sans-serif" font-size="10" fill="#666">Boom Pivot</text>

      <!-- Stage 1 Coordinate System at Origin O -->
      <!-- X-axis (Forward) -->
      <line x1="0" y1="0" x2="40" y2="0" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="42" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">X</text>
      <text x="42" y="15" font-family="Arial, sans-serif" font-size="8" fill="#666">Forward</text>

      <!-- Y-axis (Up) -->
      <line x1="0" y1="0" x2="28" y2="-28" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="30" y="-30" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">Y</text>
      <text x="30" y="-18" font-family="Arial, sans-serif" font-size="8" fill="#666">Up</text>

      <!-- Z-axis (Left) -->
      <line x1="0" y1="0" x2="0" y2="-40" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="-5" y="-42" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">Z</text>
      <text x="-18" y="-28" font-family="Arial, sans-serif" font-size="8" fill="#666">Left</text>

      <!-- A: Actuator Base -->
      <circle cx="-30" cy="80" r="6" fill="#333" stroke="#fff" stroke-width="2"/>
      <text x="-45" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">A</text>
      <text x="-70" y="105" font-family="Arial, sans-serif" font-size="10" fill="#666">Actuator Base</text>

      <!-- B: Bellcrank Joint -->
      <circle cx="120" cy="-30" r="6" fill="#ff4444" stroke="#fff" stroke-width="2"/>
      <text x="130" y="-25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff4444">B</text>
      <text x="135" y="-35" font-family="Arial, sans-serif" font-size="10" fill="#666">Bellcrank Joint</text>

      <!-- C: Boom Attachment -->
      <circle cx="180" cy="-10" r="6" fill="#ff9800" stroke="#fff" stroke-width="2"/>
      <text x="190" y="-5" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff9800">C</text>
      <text x="195" y="-15" font-family="Arial, sans-serif" font-size="10" fill="#666">Boom Point</text>

      <!-- Links -->
      <!-- Boom OC -->
      <line x1="0" y1="0" x2="180" y2="-10" stroke="url(#boomGrad)" stroke-width="12" stroke-linecap="round"/>

      <!-- Actuator AB -->
      <line x1="-30" y1="80" x2="120" y2="-30" stroke="url(#actuatorGrad)" stroke-width="8" stroke-linecap="round"/>
      <text x="35" y="30" font-family="Arial, sans-serif" font-size="10" fill="#ff4444">Hydraulic Actuator</text>

      <!-- Bellcrank BC -->
      <line x1="120" y1="-30" x2="180" y2="-10" stroke="#666" stroke-width="5"/>

      <!-- OA (ground link) -->
      <line x1="0" y1="0" x2="-30" y2="80" stroke="#999" stroke-width="3" stroke-dasharray="4,2" opacity="0.5"/>

      <!-- AC (diagonal constraint - dashed) -->
      <line x1="-30" y1="80" x2="180" y2="-10" stroke="#666" stroke-width="2" stroke-dasharray="6,3" opacity="0.7"/>
      <text x="70" y="35" font-family="Arial, sans-serif" font-size="9" fill="#666">AC</text>

      <!-- Angle Labels -->
      <text x="35" y="-5" font-family="Arial, sans-serif" font-size="10" fill="#2196F3" font-weight="bold">Boom Angle</text>
      <text x="140" y="-40" font-family="Arial, sans-serif" font-size="10" fill="#9c27b0" font-weight="bold">∠OCB₁</text>

      <!-- Output label -->
      <text x="160" y="-45" font-family="Arial, sans-serif" font-size="10" fill="#9c27b0">(Stage 1 Output)</text>
    </g>

    <!-- Stage 1 Coordinate System -->
    <g transform="translate(80, 150)">
      <!-- Coordinate axes -->
      <!-- X-axis (Forward) -->
      <line x1="0" y1="0" x2="30" y2="0" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="32" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">X</text>
      <text x="32" y="16" font-family="Arial, sans-serif" font-size="8" fill="#666">Forward</text>

      <!-- Y-axis (Left) -->
      <line x1="0" y1="0" x2="21" y2="-21" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="23" y="-23" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">Y</text>
      <text x="23" y="-12" font-family="Arial, sans-serif" font-size="8" fill="#666">Left</text>

      <!-- Z-axis (Up) -->
      <line x1="0" y1="0" x2="0" y2="-30" stroke="#ff4444" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="-5" y="-32" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff4444">Z</text>
      <text x="-18" y="-20" font-family="Arial, sans-serif" font-size="8" fill="#666">Up</text>

      <!-- Origin -->
      <circle cx="0" cy="0" r="2" fill="#ff4444"/>

      <!-- Coordinate system label -->
      <text x="0" y="25" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#ff4444" font-weight="bold">Machine Body Frame</text>
    </g>
  </g>

  <!-- Mechanical Coupling Arrow -->
  <g id="coupling">
    <path d="M 520,250 L 620,250" stroke="#9c27b0" stroke-width="3" marker-end="url(#arrowPurple)"/>
    <text x="570" y="245" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#9c27b0" font-weight="bold">
      ∠OCB₁ = ∠OCB₂
    </text>
    <text x="570" y="265" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
      Mechanical Coupling
    </text>
    <text x="570" y="280" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#999">
      (Fixed Angular Relationship)
    </text>
  </g>

  <!-- Stage 2: Bucket Tilt Linkage -->
  <g id="stage2">
    <!-- Border -->
    <rect x="640" y="80" width="450" height="320" fill="none" stroke="#4caf50" stroke-width="2" stroke-dasharray="8,4" rx="5"/>

    <!-- Stage Title -->
    <text x="865" y="110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#4caf50">
      Stage 2: Bucket Tilt Linkage
    </text>
    <text x="865" y="130" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
      (Bellcrank Angle ∠OCB₂ → Final Bucket Angle ∠AOC)
    </text>

    <!-- Mechanism (Flipped) -->
    <g transform="translate(940, 250) scale(-1, 1)">
      <!-- Points -->
      <!-- O: Origin -->
      <circle cx="0" cy="0" r="8" fill="#333" stroke="#fff" stroke-width="2"/>
      <text x="15" y="-10" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333" transform="scale(-1, 1)">O</text>

      <!-- Stage 2 Coordinate System at Origin O (Boom-End Frame) -->
      <!-- X-axis (Boom Forward) -->
      <line x1="0" y1="0" x2="30" y2="0" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)" transform="scale(-1, 1)"/>
      <text x="32" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50" transform="scale(-1, 1)">X</text>
      <text x="22" y="16" font-family="Arial, sans-serif" font-size="8" fill="#666" transform="scale(-1, 1)">Boom Forward</text>

      <!-- Y-axis (Left) -->
      <line x1="0" y1="0" x2="21" y2="-21" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)" transform="scale(-1, 1)"/>
      <text x="23" y="-23" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50" transform="scale(-1, 1)">Y</text>
      <text x="15" y="-12" font-family="Arial, sans-serif" font-size="8" fill="#666" transform="scale(-1, 1)">Left</text>

      <!-- Z-axis (Up) -->
      <line x1="0" y1="0" x2="0" y2="-30" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)" transform="scale(-1, 1)"/>
      <text x="-5" y="-32" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50" transform="scale(-1, 1)">Z</text>
      <text x="-18" y="-20" font-family="Arial, sans-serif" font-size="8" fill="#666" transform="scale(-1, 1)">Up</text>

      <!-- A: Fixed Mount -->
      <circle cx="60" cy="-30" r="6" fill="#333" stroke="#fff" stroke-width="2"/>
      <text x="-75" y="-35" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333" transform="scale(-1, 1)">A</text>

      <!-- B: Coupler Joint -->
      <circle cx="180" cy="60" r="6" fill="#4caf50" stroke="#fff" stroke-width="2"/>
      <text x="-195" y="65" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4caf50" transform="scale(-1, 1)">B</text>

      <!-- C: Bucket Point -->
      <circle cx="240" cy="-10" r="6" fill="#ffc107" stroke="#fff" stroke-width="2"/>
      <text x="-255" y="-5" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffc107" transform="scale(-1, 1)">C</text>

      <!-- Links -->
      <!-- OC (Boom structure) -->
      <line x1="0" y1="0" x2="240" y2="-10" stroke="url(#boomGrad)" stroke-width="12" stroke-linecap="round"/>

      <!-- OA -->
      <line x1="0" y1="0" x2="60" y2="-30" stroke="#666" stroke-width="5" stroke-dasharray="6,3" opacity="0.7"/>
      <text x="-35" y="-20" font-family="Arial, sans-serif" font-size="10" fill="#666" transform="scale(-1, 1)">OA</text>

      <!-- AB -->
      <line x1="60" y1="-30" x2="180" y2="60" stroke="#666" stroke-width="5"/>

      <!-- BC -->
      <line x1="180" y1="60" x2="240" y2="-10" stroke="#666" stroke-width="5"/>

      <!-- BO (diagonal constraint - dashed) -->
      <line x1="180" y1="60" x2="0" y2="0" stroke="#666" stroke-width="2" stroke-dasharray="6,3" opacity="0.7"/>
      <text x="-100" y="35" font-family="Arial, sans-serif" font-size="9" fill="#666" transform="scale(-1, 1)">BO</text>

      <!-- Angle Labels -->
      <text x="-200" y="30" font-family="Arial, sans-serif" font-size="10" fill="#9c27b0" font-weight="bold" transform="scale(-1, 1)">∠OCB₂</text>
      <text x="-45" y="-35" font-family="Arial, sans-serif" font-size="10" fill="#4caf50" font-weight="bold" transform="scale(-1, 1)">∠AOC</text>

      <!-- Labels -->
      <text x="25" y="20" font-family="Arial, sans-serif" font-size="10" fill="#666" transform="scale(-1, 1)">Boom End</text>
      <text x="-70" y="-50" font-family="Arial, sans-serif" font-size="10" fill="#666" transform="scale(-1, 1)">Fixed Mount</text>
      <text x="-200" y="85" font-family="Arial, sans-serif" font-size="10" fill="#666" transform="scale(-1, 1)">Coupler Joint</text>
      <text x="-270" y="-25" font-family="Arial, sans-serif" font-size="10" fill="#666" transform="scale(-1, 1)">Bucket Point</text>
    </g>

    <!-- Stage 2 Coordinate System -->
    <g transform="translate(1010, 150)">
      <!-- Coordinate axes -->
      <!-- X-axis (Boom Forward) -->
      <line x1="0" y1="0" x2="30" y2="0" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="32" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50">X</text>
      <text x="22" y="16" font-family="Arial, sans-serif" font-size="8" fill="#666">Boom Forward</text>

      <!-- Y-axis (Left) -->
      <line x1="0" y1="0" x2="21" y2="-21" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="23" y="-23" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50">Y</text>
      <text x="15" y="-12" font-family="Arial, sans-serif" font-size="8" fill="#666">Left</text>

      <!-- Z-axis (Up) -->
      <line x1="0" y1="0" x2="0" y2="-30" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="-5" y="-32" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4caf50">Z</text>
      <text x="-18" y="-20" font-family="Arial, sans-serif" font-size="8" fill="#666">Up</text>

      <!-- Origin -->
      <circle cx="0" cy="0" r="2" fill="#4caf50"/>

      <!-- Coordinate system label -->
      <text x="0" y="25" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#4caf50" font-weight="bold">Boom-End Frame</text>
    </g>
  </g>

  <!-- Component Legend -->
  <g id="legend" transform="translate(1150, 80)">
    <rect x="0" y="0" width="220" height="200" fill="white" stroke="#333" stroke-width="1" rx="3"/>
    <text x="110" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Component Legend</text>

    <text x="10" y="40" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Common Points:</text>
    <circle cx="20" cy="50" r="4" fill="#333"/>
    <text x="30" y="54" font-family="Arial, sans-serif" font-size="10">O : Pivot/Reference Points</text>

    <text x="10" y="75" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Stage 1 (Actuation):</text>
    <circle cx="20" cy="85" r="3" fill="#333"/>
    <text x="30" y="89" font-family="Arial, sans-serif" font-size="10">A : Actuator Base</text>
    <circle cx="20" cy="100" r="3" fill="#ff4444"/>
    <text x="30" y="104" font-family="Arial, sans-serif" font-size="10">B : Bellcrank Joint</text>
    <circle cx="20" cy="115" r="3" fill="#ff9800"/>
    <text x="30" y="119" font-family="Arial, sans-serif" font-size="10">C : Boom Attachment</text>
    <line x1="15" y1="130" x2="25" y2="130" stroke="#ff4444" stroke-width="3"/>
    <text x="30" y="134" font-family="Arial, sans-serif" font-size="10">Hydraulic Actuator</text>

    <text x="10" y="155" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Stage 2 (Tilt):</text>
    <circle cx="20" cy="165" r="3" fill="#333"/>
    <text x="30" y="169" font-family="Arial, sans-serif" font-size="10">A : Fixed Mount</text>
    <circle cx="20" cy="180" r="3" fill="#4caf50"/>
    <text x="30" y="184" font-family="Arial, sans-serif" font-size="10">B : Coupler Joint</text>
    <line x1="15" y1="195" x2="25" y2="195" stroke="url(#boomGrad)" stroke-width="3"/>
    <text x="30" y="199" font-family="Arial, sans-serif" font-size="10">Boom Structure</text>
  </g>

  <!-- Mathematical Model -->
  <g id="math-model" transform="translate(1150, 300)">
    <rect x="0" y="0" width="220" height="120" fill="white" stroke="#333" stroke-width="1" rx="3"/>
    <text x="110" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Mathematical Model</text>

    <text x="10" y="40" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#ff4444">Stage 1 (Actuation Linkage):</text>
    <text x="10" y="55" font-family="Courier New, monospace" font-size="9">∠OCB₁ = f₁(L_actuator, θ_boom)</text>
    <text x="10" y="68" font-family="Arial, sans-serif" font-size="9" fill="#666">Four-bar constraint equations</text>

    <text x="10" y="85" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#9c27b0">Mechanical Coupling:</text>
    <text x="10" y="100" font-family="Courier New, monospace" font-size="9">∠OCB₂ = ∠OCB₁ + α</text>
    <text x="10" y="113" font-family="Arial, sans-serif" font-size="9" fill="#666">Fixed angular offset α</text>
  </g>

  <!-- Control System Signal Flow -->
  <g id="signal-flow" transform="translate(50, 450)">
    <rect x="0" y="0" width="1320" height="200" fill="white" stroke="#333" stroke-width="1" rx="5"/>
    <text x="660" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Control System Signal Flow</text>

    <!-- Flow boxes -->
    <g id="flow-elements">
      <!-- Actuator Length -->
      <rect x="50" y="50" width="140" height="60" fill="#ffebee" stroke="#ff4444" stroke-width="2" rx="3"/>
      <text x="120" y="75" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Actuator Length</text>
      <text x="120" y="95" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">(Control Input)</text>

      <!-- Boom Angle -->
      <rect x="50" y="120" width="140" height="60" fill="#e3f2fd" stroke="#2196F3" stroke-width="2" rx="3"/>
      <text x="120" y="145" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Boom Angle</text>
      <text x="120" y="165" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">(System State)</text>

      <!-- Stage 1 -->
      <rect x="280" y="70" width="180" height="80" fill="#ffebee" stroke="#ff4444" stroke-width="2" rx="3"/>
      <text x="370" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">Stage 1: OABC</text>
      <text x="370" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Actuation Linkage</text>
      <text x="370" y="135" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Output: ∠OCB₁</text>

      <!-- Coupling -->
      <rect x="550" y="70" width="180" height="80" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="3"/>
      <text x="640" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">Coupling</text>
      <text x="640" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">∠OCB₂ = ∠OCB₁</text>

      <!-- Stage 2 -->
      <rect x="820" y="70" width="180" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="3"/>
      <text x="910" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">Stage 2: OABC</text>
      <text x="910" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Tilt Linkage</text>
      <text x="910" y="135" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Output: ∠AOC</text>

      <!-- Final Output -->
      <rect x="1090" y="70" width="180" height="80" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="3"/>
      <text x="1180" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">Bucket Position</text>
      <text x="1180" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(Final Control)</text>

      <!-- Arrows -->
      <path d="M 190,80 L 280,100" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M 190,150 L 280,120" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M 460,110 L 550,110" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M 730,110 L 820,110" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M 1000,110 L 1090,110" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    </g>
  </g>

  <!-- Coordinate Systems Section -->
  <g id="coordinate_systems">
    <!-- Section Title -->
    <text x="700" y="635" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
      Coordinate Systems
    </text>

    <!-- Stage 1 Coordinate System -->
    <g id="stage1_coordinates">
      <!-- Border -->
      <rect x="100" y="650" width="480" height="120" fill="#ffebee" stroke="#ff4444" stroke-width="2" stroke-dasharray="4,2" rx="5"/>

      <!-- Title -->
      <text x="340" y="675" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#ff4444">
        Stage 1: Bucket Actuation Linkage
      </text>

      <!-- Coordinate axes -->
      <g transform="translate(150, 720)">
        <!-- X-axis (Forward) -->
        <line x1="0" y1="0" x2="40" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="45" y="5" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">X</text>
        <text x="45" y="18" font-family="Arial, sans-serif" font-size="9" fill="#666">Forward</text>

        <!-- Y-axis (Left) -->
        <line x1="0" y1="0" x2="28" y2="-28" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="32" y="-32" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Y</text>
        <text x="32" y="-19" font-family="Arial, sans-serif" font-size="9" fill="#666">Left</text>

        <!-- Z-axis (Up) -->
        <line x1="0" y1="0" x2="0" y2="-40" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="-5" y="-45" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Z</text>
        <text x="-15" y="-32" font-family="Arial, sans-serif" font-size="9" fill="#666">Up</text>

        <!-- Origin -->
        <circle cx="0" cy="0" r="3" fill="#ff4444"/>
        <text x="5" y="15" font-family="Arial, sans-serif" font-size="10" fill="#666">Origin: Boom Pivot</text>
      </g>

      <!-- Properties -->
      <text x="300" y="695" font-family="Arial, sans-serif" font-size="11" fill="#666">• Right-handed system</text>
      <text x="300" y="710" font-family="Arial, sans-serif" font-size="11" fill="#666">• Fixed to machine body</text>
      <text x="300" y="725" font-family="Arial, sans-serif" font-size="11" fill="#666">• Origin at boom pivot point</text>
    </g>

    <!-- Stage 2 Coordinate System -->
    <g id="stage2_coordinates">
      <!-- Border -->
      <rect x="620" y="650" width="480" height="120" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" stroke-dasharray="4,2" rx="5"/>

      <!-- Title -->
      <text x="860" y="675" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4caf50">
        Stage 2: Bucket Tilt Linkage
      </text>

      <!-- Coordinate axes -->
      <g transform="translate(670, 720)">
        <!-- X-axis (Boom Forward) -->
        <line x1="0" y1="0" x2="40" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="45" y="5" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">X</text>
        <text x="30" y="18" font-family="Arial, sans-serif" font-size="9" fill="#666">Boom Forward</text>

        <!-- Y-axis (Left) -->
        <line x1="0" y1="0" x2="28" y2="-28" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="32" y="-32" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Y</text>
        <text x="20" y="-19" font-family="Arial, sans-serif" font-size="9" fill="#666">Left</text>

        <!-- Z-axis (Up) -->
        <line x1="0" y1="0" x2="0" y2="-40" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
        <text x="-5" y="-45" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Z</text>
        <text x="-15" y="-32" font-family="Arial, sans-serif" font-size="9" fill="#666">Up</text>

        <!-- Origin -->
        <circle cx="0" cy="0" r="3" fill="#4caf50"/>
        <text x="5" y="15" font-family="Arial, sans-serif" font-size="10" fill="#666">Origin: Boom End</text>
      </g>

      <!-- Properties -->
      <text x="820" y="695" font-family="Arial, sans-serif" font-size="11" fill="#666">• Right-handed system</text>
      <text x="820" y="710" font-family="Arial, sans-serif" font-size="11" fill="#666">• Fixed to boom end</text>
      <text x="820" y="725" font-family="Arial, sans-serif" font-size="11" fill="#666">• X-axis along boom direction</text>
    </g>
  </g>
</svg>
